<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome Message Configuration</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="styles.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body>
    <!-- Opt-In Management Section (for keywords) -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-10 mx-auto">
                <div class="card">
                    <div class="card-body">
                        <h3 class="text-primary mb-4">Opt-In Management</h3>
                        
                        <div class="opt-section">
                            <div class="d-flex align-items-center mb-2">
                                <div class="opt-icon">
                                    <i class="bi bi-shield-check"></i>
                                </div>
                                <div>
                                    <h5 class="text-primary mb-0">Opt-in</h5>
                                    <p class="text-muted small">A text that explains what opt-in is</p>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6>Opt-in Response</h6>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="optInSwitch" checked>
                                        </div>
                                    </div>
                                    <p class="text-muted small">Setup a response message for opt-in user keywords</p>
                                    <button class="btn btn-primary btn-sm configure-btn" data-type="opt-in">
                                        <i class="bi bi-gear-fill me-1"></i> Configure
                                    </button>
                                    
                                    <div class="whatsapp-preview mt-3">
                                        <div class="whatsapp-icon small">
                                            <i class="bi bi-whatsapp"></i>
                                        </div>
                                        <div class="message-bubble small">
                                            <p>Hi! Thanks for connecting. Someone from our team will get in touch soon.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6>Opt-in Keywords</h6>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="optInKeywordsSwitch" checked>
                                        </div>
                                    </div>
                                    <p class="text-muted small">The user will have to type exactly one of these messages on which they should be automatically opted-in</p>
                                    
                                    <div class="keyword-input-container mb-2">
                                        <div class="input-group">
                                            <span class="input-group-text bg-white">
                                                <i class="bi bi-plus-circle text-primary"></i>
                                            </span>
                                            <input type="text" class="form-control" placeholder="# Add keyword">
                                        </div>
                                    </div>
                                    
                                    <div class="keywords-container">
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Opt-out section (similar structure) -->
                        <div class="opt-section">
                            <div class="d-flex align-items-center mb-2">
                                <div class="opt-icon opt-out">
                                    <i class="bi bi-shield-check"></i>
                                </div>
                                <div>
                                    <h5 class="text-primary mb-0">Opt-out</h5>
                                    <p class="text-muted small">A text that explains what opt-in is</p>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6>Opt-out Response</h6>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="optOutSwitch" checked>
                                        </div>
                                    </div>
                                    <p class="text-muted small">Setup a response message for opt-out user keywords</p>
                                    <button class="btn btn-primary btn-sm configure-btn" data-type="opt-out">
                                        <i class="bi bi-gear-fill me-1"></i> Configure
                                    </button>
                                    
                                    <div class="whatsapp-preview mt-3">
                                        <div class="whatsapp-icon small">
                                            <i class="bi bi-whatsapp"></i>
                                        </div>
                                        <div class="message-bubble small">
                                            <p>Hi! Thanks for connecting. Someone from our team will get in touch soon.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6>Opt-out Keywords</h6>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="optOutKeywordsSwitch" checked>
                                        </div>
                                    </div>
                                    <p class="text-muted small">The user will have to type exactly one of these messages on which they should be automatically opted-out</p>
                                    
                                    <div class="keyword-input-container mb-2">
                                        <div class="input-group">
                                            <span class="input-group-text bg-white">
                                                <i class="bi bi-plus-circle text-primary"></i>
                                            </span>
                                            <input type="text" class="form-control" placeholder="# Add keyword">
                                        </div>
                                    </div>
                                    
                                    <div class="keywords-container">
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                        <span class="keyword-chip">Keyword <i class="bi bi-x"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Dialog -->
    <div class="modal fade" id="configureModal" tabindex="-1" aria-labelledby="configureModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title text-primary fw-bold" id="configureModalLabel">CONFIGURE WELCOME MESSAGE</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-4">
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="messageType" id="preApproved" value="preApproved">
                                <label class="form-check-label" for="preApproved">
                                    Pre-approved template message
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="messageType" id="regularMessage" value="regularMessage" checked>
                                <label class="form-check-label" for="regularMessage">
                                    Regular message
                                </label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Type</label>
                            <div class="d-flex gap-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="contentType" id="textType" value="text" checked>
                                    <label class="form-check-label" for="textType">
                                        Text
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="contentType" id="imageType" value="image">
                                    <label class="form-check-label" for="imageType">
                                        Image
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="contentType" id="videoType" value="video">
                                    <label class="form-check-label" for="videoType">
                                        Video
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="contentType" id="documentType" value="document">
                                    <label class="form-check-label" for="documentType">
                                        Document
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Message Body Section -->
                        <div id="textSection">
                            <div class="mb-3 position-relative">
                                <label for="messageBody" class="form-label">Message Body <span class="text-danger">*</span></label>
                                <div class="char-count">0/4096</div>
                                <textarea class="form-control" id="messageBody" rows="6" placeholder="Enter your message here"></textarea>
                                <div class="formatting-toolbar">
                                    <button type="button" class="btn btn-sm btn-light"><i class="bi bi-type-bold"></i></button>
                                    <button type="button" class="btn btn-sm btn-light"><i class="bi bi-type-italic"></i></button>
                                    <button type="button" class="btn btn-sm btn-light"><i class="bi bi-type-underline"></i></button>
                                    <button type="button" class="btn btn-sm btn-light"><i class="bi bi-emoji-smile"></i></button>
                                </div>
                            </div>
                        </div>

                        <!-- Media Upload Section (initially hidden) -->
                        <div id="mediaSection" class="d-none">
                            <div class="mb-3">
                                <label class="form-label">Upload Media File</label>
                                <p class="text-muted small">Supported file type : .png or .jpeg</p>
                                <p class="text-muted small">Maximum file size : 5 MB</p>
                                <button class="btn btn-primary w-100 mb-3">
                                    <i class="bi bi-upload me-2"></i> Upload From Media Library
                                </button>
                                
                                <div class="divider-with-text">
                                    <span>or</span>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="mediaUrl" class="form-label">Media URL</label>
                                    <input type="text" class="form-control" id="mediaUrl" placeholder="https://unsplash.com/photos/people-sitting-at-the-table-">
                                    <button type="button" class="btn btn-outline-primary btn-sm mt-2">Add Variable</button>
                                </div>
                            </div>
                        </div>

                        <!-- Preview Section -->
                        <div class="preview-section">
                            <div class="whatsapp-preview">
                                <div class="whatsapp-icon">
                                    <i class="bi bi-whatsapp"></i>
                                </div>
                                <div class="message-bubble">
                                    <p>Hi {{1}}, please find details in attached pdf as discussed over call and click on demo link to explore demo. id :demo password : 1289</p>
                                    <p>Thank You {{2}}</p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-top-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // JavaScript to handle modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Get all configure buttons
            const configureButtons = document.querySelectorAll('.configure-btn');
            const configureModal = new bootstrap.Modal(document.getElementById('configureModal'));
            const modalTitle = document.getElementById('configureModalLabel');
            
            // Add click event to all configure buttons
            configureButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    
                    // Update modal title based on button type
                    if (type === 'opt-in') {
                        modalTitle.textContent = 'CONFIGURE WELCOME MESSAGE';
                    } else if (type === 'opt-out') {
                        modalTitle.textContent = 'CONFIGURE WELCOME MESSAGE';
                    }
                    
                    // Show the modal
                    configureModal.show();
                });
            });
            
            // Toggle between text and media sections
            const textType = document.getElementById('textType');
            const imageType = document.getElementById('imageType');
            const videoType = document.getElementById('videoType');
            const documentType = document.getElementById('documentType');
            
            const textSection = document.getElementById('textSection');
            const mediaSection = document.getElementById('mediaSection');
            
            textType.addEventListener('change', function() {
                if(this.checked) {
                    textSection.classList.remove('d-none');
                    mediaSection.classList.add('d-none');
                }
            });
            
            [imageType, videoType, documentType].forEach(function(elem) {
                elem.addEventListener('change', function() {
                    if(this.checked) {
                        textSection.classList.add('d-none');
                        mediaSection.classList.remove('d-none');
                    }
                });
            });
            
            // Character counter functionality
            const messageBody = document.getElementById('messageBody');
            const charCount = document.querySelector('.char-count');
            
            messageBody.addEventListener('input', function() {
                const currentLength = this.value.length;
                charCount.textContent = currentLength + '/4096';
            });
            
            // Keyword chip removal functionality
            const keywordChips = document.querySelectorAll('.keyword-chip');
            
            keywordChips.forEach(chip => {
                const closeIcon = chip.querySelector('.bi-x');
                closeIcon.addEventListener('click', function() {
                    chip.remove();
                });
            });
        });
    </script>
</body>
</html>